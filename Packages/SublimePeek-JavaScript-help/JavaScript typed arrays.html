<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="chrome=1"><title>SublimePeek | Help for JavaScript typed arrays</title><link href="css/bootstrap.min.css" rel="stylesheet"><style type="text/css">  body {  padding-top: 10px;  padding-bottom: 20px;  padding-left: 10%;  padding-right: 10%;  }  .sidebar-nav {  padding: 9px 0;  }</style><link href="css/bootstrap-responsive.min.css" rel="stylesheet"><link href="css/custom.css" rel="stylesheet">  </head><body><div style="display: block; "><div id="4eea835f8cd2963cba000002" class="page-header"><h2>JavaScript typed arrays</h2><!--CONTENT--><div id = "section_1"><span id = "Buffers_and_views:.C2.A0typed_array_architecture"></span><h2 class = "editable">Buffers and views:&nbsp;typed array architecture</h2><p>To achieve maximum flexibility and efficiency, JavaScript typed arrays split the implementation into a <strong>buffer</strong> and a <strong>view</strong>. A buffer (implemented by the <a title = "en/JavaScript typed arrays/ArrayBuffer" rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBuffer"><code>ArrayBuffer</code></a> class) is an object representing a chunk of data; it has no format to speak of, and offers no mechanism for accessing its contents. In order to access the memory contained in a buffer, you need to use a view. A view provides a context&mdash;that is, a data type, starting offset, and number of elements&mdash;that turns the data into an actual typed array. Views are implemented by the <a title = "en/JavaScript typed arrays/ArrayBufferView" rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBufferView"><code>ArrayBufferView</code></a> class and its subclasses.</p><p><div class = "wiki-tree"><ul><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBuffer" title = "en/JavaScript_typed_arrays/ArrayBuffer" pageid = "57153">ArrayBuffer</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBufferView" title = "en/JavaScript_typed_arrays/ArrayBufferView" pageid = "57154">ArrayBufferView</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/DataView" title = "en/JavaScript_typed_arrays/DataView" pageid = "66445">DataView</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/Float32Array" title = "en/JavaScript_typed_arrays/Float32Array" pageid = "62451">Float32Array</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/Float64Array" title = "en/JavaScript_typed_arrays/Float64Array" pageid = "62453">Float64Array</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/Int16Array" title = "en/JavaScript_typed_arrays/Int16Array" pageid = "62446">Int16Array</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/Int32Array" title = "en/JavaScript_typed_arrays/Int32Array" pageid = "62449">Int32Array</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/Int8Array" title = "en/JavaScript_typed_arrays/Int8Array" pageid = "57155">Int8Array</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/Uint16Array" title = "en/JavaScript_typed_arrays/Uint16Array" pageid = "62448">Uint16Array</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/Uint32Array" title = "en/JavaScript_typed_arrays/Uint32Array" pageid = "62450">Uint32Array</a></li><li><a rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/Uint8Array" title = "en/JavaScript_typed_arrays/Uint8Array" pageid = "62445">Uint8Array</a></li></ul></div></p></div><div id = "section_2"><span id = "Using_views_with_buffers"></span><h2 class = "editable">Using views with buffers</h2><p>Let's create a 16-byte buffer:</p>          <pre name = "code" class = "js">var buffer = new ArrayBuffer(16);</pre>        <p>At this point, we have a chunk of memory whose bytes are all pre-initialized to 0. There's not a lot we can do with it, though. We can confirm that it is indeed 16 bytes long, and that's about it:</p>          <pre name = "code" class = "js">if (buffer.byteLength == 16) {  alert(&quot;Yes, it's 16 bytes.&quot;);} else {  alert(&quot;Oh no, it's the wrong size!&quot;);}</pre>        <p>Before we can really work with this buffer, we need to create a view. Let's create a view that treats the data in the buffer as an array of 32-bit signed integers:</p>          <pre name = "code" class = "js">var int32View = new Int32Array(buffer);</pre>        <p>Now we can access the fields in the array just like a normal array:</p>          <pre name = "code" class = "js">for (var i=0; i&lt;int32View.length; i++) {  int32View[i] = i*2;}</pre>        <p>This fills out the 4 entries in the array (4 entries at 4 bytes each makes 16 total bytes) with the values 0, 2, 4, and 6.</p><div id = "section_3"><span id = "Multiple_views_on_the_same_data"></span><h3 class = "editable">Multiple views on the same data</h3><p>Things start to get really interesting when you consider that you can create multiple views onto the same data. For example, given the code above, we can continue like this:</p>          <pre name = "code" class = "js">var int16View = new Int16Array(buffer);for (var i=0; i&lt;int16View.length; i++) {  console.log(&quot;Entry &quot; + i + &quot;: &quot; + int16View[i]);}</pre>        <p>Here we create a 16-bit integer view that shares the same buffer as the existing 32-bit view and we output all the values in the buffer as 16-bit integers. Now we get the output 0, 0, 2, 0, 4, 0, 6, 0.</p><p>You can go a step farther, though. Consider this:</p>          <pre name = "code" class = "js">int16View[0] = 32;console.log(&quot;Entry 0 in the 32-bit array is now &quot; + int32View[0]);</pre>        <p>The output from this is &quot;Entry 0 in the 32-bit array is now 32&quot;. In other words, the two arrays are indeed simply views on the same data buffer, treating it as different formats. You can do this with any <a title = "en/JavaScript typed arrays/ArrayBufferView#Typed array subclasses" rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBufferView#Typed_array_subclasses">view types</a>.</p></div></div><div id = "section_3"><span id = "Multiple_views_on_the_same_data"></span><h3 class = "editable">Multiple views on the same data</h3><p>Things start to get really interesting when you consider that you can create multiple views onto the same data. For example, given the code above, we can continue like this:</p>          <pre name = "code" class = "js">var int16View = new Int16Array(buffer);for (var i=0; i&lt;int16View.length; i++) {  console.log(&quot;Entry &quot; + i + &quot;: &quot; + int16View[i]);}</pre>        <p>Here we create a 16-bit integer view that shares the same buffer as the existing 32-bit view and we output all the values in the buffer as 16-bit integers. Now we get the output 0, 0, 2, 0, 4, 0, 6, 0.</p><p>You can go a step farther, though. Consider this:</p>          <pre name = "code" class = "js">int16View[0] = 32;console.log(&quot;Entry 0 in the 32-bit array is now &quot; + int32View[0]);</pre>        <p>The output from this is &quot;Entry 0 in the 32-bit array is now 32&quot;. In other words, the two arrays are indeed simply views on the same data buffer, treating it as different formats. You can do this with any <a title = "en/JavaScript typed arrays/ArrayBufferView#Typed array subclasses" rel = "internal" href = "https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBufferView#Typed_array_subclasses">view types</a>.</p></div><div id = "section_4"><span id = "Working_with_complex_data_structures"></span><h2 class = "editable">Working with complex data structures</h2><p>By combining a single buffer with multiple views of different types, starting at different offsets into the buffer, you can interact with data objects containing multiple data types. This lets you, for example, interact with complex data structures from <a title = "en/WebGL" rel = "internal" href = "https://developer.mozilla.org/en/WebGL">WebGL</a>, data files, or C structures you need to use while using <a title = "en/js-ctypes" rel = "internal" href = "https://developer.mozilla.org/en/js-ctypes">js-ctypes</a>.</p><p>Consider this C structure:</p>          <pre name = "code" class = "c">struct someStruct {  unsigned long id;  char username[16];  float amountDue;};</pre>        <p>You can access a buffer containing data in this format like this:</p>          <pre name = "code" class = "js">var buffer = new ArrayBuffer(24);// ... read the data into the buffer ...var idView = new Uint32Array(buffer, 0, 1);var usernameView = new Uint8Array(buffer, 4, 16);var amountDueView = new Float32Array(buffer, 20, 1);</pre>        <p>Then you can access, for example, the amount due with <code>amountDueView[0]</code>.</p><div class = "note"><strong>Note:</strong> The <a class = "external" title = "http://en.wikipedia.org/wiki/Data_structure_alignment" rel = "external" href = "http://en.wikipedia.org/wiki/Data_structure_alignment" target = "_blank">data structure alignment</a> in a C structure is platform-dependent. Take precautions and considerations for these padding differences.</div></div><div id = "section_5"><span id = "Compatibility"></span><h2 class = "editable">Compatibility</h2><p>Typed arrays are available in WebKit as well. Chrome 7 includes support for <code>ArrayBuffer</code>, <code>Float32Array</code>, <code>Int16Array</code>, and <code>Uint8Array</code>. Chrome 9 adds support for <code>DataView</code> objects.</p></div><div id = "section_6"><span id = "Specification"></span><h2 class = "editable">Specification</h2><ul> <li><a class = "link-https" title = "https://cvs.khronos.org/svn/repos/registry/trunk/public/webgl/doc/spec/TypedArray-spec.html" rel = "external" href = "https://cvs.khronos.org/svn/repos/registry/trunk/public/webgl/doc/spec/TypedArray-spec.html" target = "_blank">Typed Arrays</a></li></ul><p></p></div><!--NOTE--><p class="source-link">This content was sourced by <a href="http://dochub.io/">DocHub</a> from MDN.</p></div></div></body></html>